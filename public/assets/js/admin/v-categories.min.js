axios.defaults.headers.post["Content-Type"]="multipart/form-data";
var app=new Vue({delimiters:["${","}"],el:"#v-app",data:{errors:[],modal:!1,isLoading:!0,id:null,name:null,image:null,description:null,token:null,categories:null},methods:{toggleModal:function(a){a&&a.stopPropagation();this.modal=!this.modal;!this.modal&&this.id&&(this.id=this.name=this.image=this.description=null)},handleImage:function(a){this.image=this.$refs.image.files[0]},createCategory:function(a){var c=this;a.preventDefault();this.isLoading=!0;a=document.getElementById("token").value;if(this.id){var b=
new FormData;b.append("id",this.id);b.append("name",this.name);b.append("image",this.image);b.append("description",this.description);b.append("token",a);axios.post("/admin/categories/update",b).then(function(a){c.fetchCategories();c.modal=!1}).catch(function(a){console.error(a);c.isLoading=!1})}else b=new FormData,b.append("name",this.name),b.append("image",this.image),b.append("description",this.description),b.append("token",a),axios.post("/admin/categories/create",b).then(function(a){c.fetchCategories();
c.modal=!1}).catch(function(a){console.error(a);c.isLoading=!1})},deleteCategory:function(a){var c=this;if(confirm("Are you sure?")){this.isLoading=!0;var b=document.getElementById("token").value,d=new FormData;d.append("id",a.id);d.append("token",b);axios.post("/admin/categories/delete",d).then(function(a){console.log(a);c.fetchCategories()}).catch(function(a){console.error(a);c.isLoading=!1})}},editCategory:function(a){console.log(a);this.id=a.id;this.name=a.name;this.description=a.description;
this.toggleModal()},fetchCategories:function(a){var c=this;this.isLoading=!0;axios.get("/admin/categories/fetch").then(function(a){c.categories=a.data.data;c.isLoading=!1})}},mounted:function(){this.fetchCategories()}});
