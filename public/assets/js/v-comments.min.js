var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}},"es6","es3");
var limit=300,app=new Vue({delimiters:["${","}"],el:"#comments",data:{error:null,comment_body:"",chars_left:limit,comments_list:[]},methods:{sendComment:function(a){var b=this;a.preventDefault();a=document.getElementById("token").value;var c=document.getElementById("thread").value;if(this.comment_body.length>limit)this.error="Your message is "+Math.abs(this.chars_left)+" characters too long";else if(0>=this.comment_body.replace(/\s/g,"").length)this.error="Message cannot be empty.";else{var d=new FormData;
d.append("body",this.comment_body);d.append("thread",c);d.append("token",a);axios.post("/api/comments",d).then(function(a){b.comment_body="";(new FormData).append("thread",c);axios.get("/api/comments",{params:{thread:c}}).then(function(a){console.log(a);b.comments_list=[];a=$jscomp.makeIterator(a.data.data);for(var c=a.next();!c.done;c=a.next())b.comments_list.push(c.value)}).catch(function(a){console.error(a)})}).catch(function(a){console.error(a)});return!0}},reportComment:function(a,b){var c=document.getElementById("token").value;
a=a.target;console.log(a);console.log(a.childNodes);var d=a.querySelector("i");d.className="spinning spinner icon";a=new FormData;a.append("comment",b);a.append("token",c);axios.post("/api/comments/report",a).then(function(a){console.log("Reported!");console.info(a.data);d.className="check icon"}).catch(function(a){console.error(a);d.className="cross icon"})},insertMention:function(a,b){console.log(a,b);this.comment_body.endsWith(" ")||0>=this.comment_body.length?this.comment_body+="@"+a+" ":this.comment_body+=
" @"+a+" "},dismissError:function(){this.error=null}},computed:{charsLeft:function(){var a=this.comment_body.length;this.chars_left=limit-a;this.error=this.comment_body.length>limit?"Your message is "+Math.abs(this.chars_left)+" characters too long":null;return limit-a}}});
