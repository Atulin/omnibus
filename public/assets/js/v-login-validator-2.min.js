var app=new Vue({delimiters:["${","}"],el:"#login",data:{errors:[],step:1,button_text:"Next",login:null,pass:null,remember:null,has_mfa:!1,avatar:null,mfa:null,msg_shown:!0},methods:{checkForm:function(c){var a=this;c.preventDefault();this.msg_shown=!1;c=document.getElementById("token").value;var d=document.getElementById("login");this.errors=[];1===this.step?(this.login||this.errors.push("Name required."),0>=this.errors.length&&axios.get("/login/validate",{params:{login:this.login,token:c}}).then(function(b){a.avatar=
b.data.data.avatar;!0===b.data.data.mfa&&(a.has_mfa=b.data.data.mfa);a.button_text="Log in";a.step=2}).catch(function(b){console.error(b);a.errors=[];a.errors.push("Incorrect token. Refresh the page.")})):2===this.step&&(this.pass||this.errors.push("Password required."),this.has_mfa&&this.mfa||this.errors.push("2FA token required."),this.err||d.submit())}}});
